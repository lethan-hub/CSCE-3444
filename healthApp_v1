# !/usr/bin/env python3

from personal_health import PersonalHealth
from workouts import workouts
from meals import meals

# Valid users
users = {
    "kevin": "password",
    "haider": "password",
    "lethan": "password",
    "parth": "password"
}

def login() -> str:
    print("Welcome back to to the Health Tracker App ❤️")
    print("Please Login ")
    while True:
        username = input("Username: ").strip().lower()
        password = input("Password: ").strip()

        if username in users and users[username] == password:
            print(f"Login Successful!\n")
            return username
        else:
            print("Username or password are incorrect. Please try again! \n")


def workouts_placeholder():
    print("\n[Workouts]")
    print("👉  This is where workout routines would go.\n")
    


def meal_planning(username):
    meals(username)


def personal_health():
    print("\n[Personal Health]")
    print("👉  This is where health metrics & tips would go.\n")
    try:
        name = input("Enter your name: ")
        age = int(input("Enter your age: "))
        gender = input("Enter your gender: ")
        height_cm = float(input("Enter your height(in cm): "))
        weight_kg = float(input("Enter your weight(in kg): "))

        profile = PersonalHealth(name,age,gender,height_cm,weight_kg)

        print("Personal Health Overview")
        for key,value in profile.profile().items():
            print(f"{key} : {value}")

    except ValueError:
        print("Invalid input. Please enter valid inputs for the required sections.")

    input("Press Enter to return to Main Menu")


def main_menu(username: str):
    
    while True:
        print(f"\nHi, {username.capitalize()}!")
        print("==== Home Screen ====")
        print("1. Workouts 🏃")
        print("2. Meal Planning 🍅")
        print("3. Personal Health 📏")
        print("4. Quit")

        choice = input("Select an option (1-4): ").strip()

        if choice == "1":
            workouts(username)
        elif choice == "2":
            meal_planning(username)
        elif choice == "3":
            personal_health()
        elif choice == "4":
            print("👋 Goodbye — stay healthy!\n")
            break
        else:
            print("Invalid selection. Please try again.")


if __name__ == "__main__":
    user = login()
    main_menu(user)
